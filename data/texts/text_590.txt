Sydney Institute for Astronomy, School of Physics, A28, The University of Sydney, NSW 2006, Australia School of Natural Sciences, College of Sciences and Engineering, University of Tasmania, Private Bag 37, Hobart TAS 7001, Australia ABSTRACT Dark matter halos represent the highest density peaks in the matter distribution. Conversely, cosmic voids are under-dense patches of the universe. Probing the mass distribution of the universe requires various approaches, including weak gravitational lensing that subtly modiï¬es the shape of distant sources, and Doppler lensing that changes the apparent size and magnitude of objects due to peculiar velocities. In this work, we adopt both gravitational and Doppler lensing eï¬€ects to study the underlying matter distribution in and around cosmic voids/halos. We use the relativistic ğ‘-body code gevolution, to generate the mass perturbations and develop a new ray-tracing code that relies on the design of the ray bundle method. We consider three categories of halo masses and void radii, and extract the cosmological information by stacking weak-lensing and Doppler lensing signals around voids/halos. The results of this paper show that the most optimal strategy that combines both gravitational and Doppler lensing eï¬€ects to map the mass distribution should focus on the redshift range ğ‘§ â‰ˆ 0.3 âˆ’ 0.4. The recommendation of this paper is that future spectroscopic surveys should focus on these redshifts and utilise the gravitational and Doppler lensing techniques to extract information about underlying matter distribution across the cosmic web, especially inside cosmic voids. This could provide a complimentary cosmological analysis for ongoing or future low-redshift spectroscopic surveys. Key words: gravitational lensing: weakâ€“ cosmology: large-scale structure of universeâ€“ cosmology: dark matterâ€“ methods: numerical Our current universe appears to be quite clumpy, with countless galaxies, groups of galaxies, galaxy clusters, and so on, spanning a wide dynamic range in mass. The mass distribution of the largescale structure (LSS) is a key factor in understanding the evolution of the universe. Due to the variations of the mass distributions of matter in the LSS: galaxies and galaxy clusters correspond to overdense regions (Broadhurst et al. 2005; Umetsu et al. 2011) while cosmic voids are the under-dense regions (Park & Lee 2007). Over the last few decades a substantial amount of research works have been published with cosmic voids by utilizing the eï¬€ects of void ellipticities, void size functions, the emptiness and its evolution over cosmic time, etc. (Park & Lee 2007; Bos et al. 2012; Pan et al. 2012; Krause et al. 2012; Sutter et al. 2012; Bolejko et al. 2013; Ceccarelli et al. 2013; Hamaus et al. 2014; Nadathur & Hotchkiss 2014; Hamaus et al. 2015; Nadathur 2016; SÃ¡nchez et al. 2016; Mao et al. 2017; Verza et al. 2019; Panchal et al. 2020; Li et al. 2020; Raghunathan et al. 2020) and halos by analysing the mass distributions of galaxies and galaxy clusters, sizes, and magnitudes of galaxies, etc. (Kaiser 2000; Schmidt et al. 2012; Han et al. 2015; Fong et al. 2018; Salcedo et al. 2019) for constraining cosmology and extracting the information from the expansion history of the Â© 2021 The Authors universe and modiï¬ed gravity (Farrar & Peebles 2004; Peebles & Nusser 2010). The weak gravitational lensing technique is a very common method to investigate the matter distribution. Weak gravitational lensing, the distortion of images when light bundles are deï¬‚ected by the mass distribution of LSS as they travel the tremendous distance from the source to the observer, provides the most eï¬ƒcient way of measuring the distribution of matter density in the universe (Kaiser 1992; Kaiser & Squires 1993; Mellier 1999; Bacon et al. 2000; Wittman et al. 2000; Bartelmann & Schneider 2001). The distortion patterns in the images from distant galaxies provide a powerful window for studying the expansion of the universe and the evolution of the cosmic structure (Wambsganss 1998; Wittman et al. 2000; Kilbinger 2015). Ongoing surveys such as the Dark Energy Survey (DES), the Dark Energy Spectroscopic Instrument (DESI) Bright Galaxy Survey (Ruiz-Macias et al. 2020; Zarrouk et al. 2021), and Hyper-Suprime-Cam (HSC) or future weak-lensing surveys such as Euclidand the Large Synoptic Survey Telescope (LSST 2012) aim to cover a wide portion of the sky with great precision. The weaklensing signal for single structures can be very diï¬ƒcult to measure. One of the reasons is the noise due to foreground structures also conhttp://www.darkenergysurvey.org https://www.desi.lbl.gov/ http://hsc.mtk.nao.ac.jp/ssp/ https://sci.esa.int/web/euclid tributing to lensing distortions. This can be minimised by the method of stacking weak-lensing signal produced by the large number of targeted structures. This can reduce the errors of the statistical analysis, which introduce a powerful tool to probe the average mass distribution of the LSS for understanding the evolution of the universe (Oguri & Takada 2011; Higuchi et al. 2013; Simet & Mandelbaum 2015). The mapping of the distribution of galaxies and clusters of galaxies (by neglecting all peculiar velocities) observed in redshift-space would be identical as compared with the real space in a perfectly homogeneous universe (Kaiser 1987). But the peculiar velocities of galaxies associated with any inhomogeneous structure will introduce distortion in this mapping along the line of sight (Davis & Peebles 1983; Kaiser 1987). This distortion eï¬€ect is known as redshift-space distortion. This eï¬€ect has been studied extensively in both linear (Davis & Peebles 1983; Kaiser 1987) and nonlinear (Cole et al. 1995; Magira et al. 2000) regimes. A complimentary method to gravitational lensing is the Doppler lensing. The Doppler lensing signal is caused by the redshift distortions. These distortions are then expressed in terms of weak-lensing quantities (Bolejko et al. 2013; Bacon et al. 2014; Bonvin et al. 2017). Since the redshift distortions are caused by the underlying matter distribution, the Doppler lensing oï¬€ers a complimentary approach to investigate matter distribution. At low redshift, the Doppler lensing is much stronger than weak-lensing, and thus convergence is dominated by the Doppler lensing (Bolejko et al. 2013; Bacon et al. 2014). Thus the correct method of analysing lensing statistics needs to incorporate both: gravitational and Doppler lensing. Bacon et al. (2014) suggested a new approach for detecting Doppler magniï¬cation that incorporated cross-correlating the convergence by using galaxy sizes and magnitudes. They used a Newtonian simulation and stacked the Doppler lensing signal around the cosmic voids and halos. They showed that at low redshift Doppler lensing dominates over standard weak-lensing and at higher redshift Doppler lensing falls while weak-lensing grows. They also constructed an estimator based on angular power spectrum which can be used to constrain the cosmological model. Later on, Bonvin et al. (2017) investigated the dipolar modulation in the size of galaxies by using the eï¬€ect of Doppler magniï¬cation. They showed that by extracting dipole in the cross-correlation of number counts and galaxy sizes one can able to detect the Doppler lensing in current and upcoming radio surveys. The formation of the LSS is complex because it becomes nonlinear as the inhomogeneities grow, so numerical methods are required. Over the last few decades, signiï¬cant attention has been devoted to study the weak gravitational lensing by the LSS associated with numerical simulations, mostly based on Newtonian gravity (Jain et al. 2000; Barber & Taylor 2003; Hilbert et al. 2009; Takahashi et al. 2011; Killedar et al. 2012; Valageas et al. 2012), but where the presence of relativistic sources is prevalent, this approach has some limitations to study the formation of cosmic structures (Chisari & Zaldarriaga 2011; Green & Wald 2011; Adamek et al. 2013; Lepori et al. 2020). As the cosmic shear signal provides the most useful cosmological information in the small angular scales so, not only the nonlinear eï¬€ect but also including the relativistic eï¬€ect (by implementing the general relativity treatment for gravity instead of Newtonian gravity) provides more accurate modelling of the weak gravitational lensing statistics. Recently, Adamek et al. (2016a,b) developed a new ğ‘-body code, namely gevolution, based on the https://github.com/gevolution-code/gevolution-1.2 MNRAS 000, 1â€“13 (2021) theory of general relativity, and our present work will use this ğ‘body simulation to study the relativistic weak-lensing statistics. In this paper we use gevolution and adopt the ray-tracing framework developed in our companion paper (Ema et al. 2021) (which focuses on studying the impact of the local environment on weak-lensing statistics). In this paper, to study the eï¬€ect of the underlying matter distribution in and around cosmic voids/halos, we will adopt both Doppler lensing and standard weak gravitational lensing and analyse their properties by utilizing the information from the statistical quantities i.e. convergence, shear, and magniï¬cation. Here we neglect the local environment eï¬€ect on light propagation. We will show how the properties of Doppler lensing diï¬€er from those of standard weak-lensing and how the distribution of matter in the universe can impact the weak-lensing signal. The layout of this paper is as follows: in Section 2, we present the background of weak gravitational lensing, Doppler lensing and numerical modelling of our ray tracing algorithm, and description of the ğ‘-body simulations. We show our results and analysis of weaklensing signal for clustering masses of the halos and clustering radii of the voids, and also show the comparison between the standard weak gravitational lensing and Doppler lensing in Section 3. Finally, we conclude in Section 4. Here our aim is to brieï¬‚y describe the theory of weak gravitational lensing which arises from the distortion of background galaxy shapes due to the intervening LSS from source galaxy to observer. It can be described by the Jacobian matrix mapping source angular positions ğœ½to image positions ğœ½, i.e., ğ‘‘ğœƒ= Ağ‘‘ğœƒ. In the weak-lensing limit, this distortion matrix (Bartelmann & Schneider 2001) can be decomposed as A =1 âˆ’ ğœ… âˆ’ ğ›¾âˆ’ğ›¾âˆ’ğ›¾1 âˆ’ ğœ… + ğ›¾ which deï¬nes the convergence ï¬eld ğœ… and complex shear ï¬eld ğ›¾ â‰¡ ğ›¾+ ğ‘–ğ›¾. The total magniï¬cation of surface area elements ğœ‡ is given by the determinant of the inverse matrix ğœ‡ =1det(A)= [(1 âˆ’ ğœ…)âˆ’ |ğ›¾|] which in the weak-lensing limit |ğœ…|, |ğ›¾| î€œ 1 can be approximated by ğœ‡ ' 1 + 2ğœ…. The convergence ï¬eld ğœ… tells us at what amount a source galaxy at a ï¬xed redshift is magniï¬ed or demagniï¬ed by the intervening of the LSS while the shear ï¬eld ğ›¾ is the stretching along the axes of the image. The tangential shear changes the orientation of the background source while convergence is responsible for the magniï¬cation or de-magniï¬cation of the source. For an azimuthally symmetric lens the convergence ğœ… and the tangential shear ğ›¾ and can be expressed as ğœ… =Î£(ğ‘Ÿ)Î£and ğ›¾ =Î”Î£(ğ‘Ÿ)Î£ where Î£(ğ‘Ÿ) represents the projected surface mass density of the lens, Î”Î£(ğ‘Ÿ) is the diï¬€erential surface mass density of the lens, ğ‘Ÿ is the physical transverse distance on the lens plane Î”Î£(ğ‘Ÿ) =Â¯ and Î£is deï¬ned as where ğ·is the angular diameter distance to the source, ğ·is the angular diameter distance to the lens and ğ·denotes the angular diameter distance between lens and source. Note that the diï¬€erential surface mass density Î”Î£(ğ‘Ÿ) is proportional to the weak-lensing tangential shear, while the projected surface mass density Î£(ğ‘Ÿ) is proportional to the weak-lensing magniï¬cation. The relevance of peculiar velocities on apparent size and magnitude of observed objects was ï¬rst highlighted by Bonvin (2008). Subsequently, Bolejko et al. (2013) demonstrated that the eï¬€ect of the Doppler lensing can dominate at low redshifts. The convergence due to Doppler lensing can be expressed by the following normalised equation where ğ‘§is the source redshift, ğ» is the Hubble parameter, ğœ’is the co-moving distance of the sources, ğ’— is the velocity of the source galaxies, ğ‘ is the speed of light, and ğ’ is the unit vector from the source to the observer (the directions in which photon propagates). Here, the sign of convergence due to Doppler lensing, ğœ…alters according to whether objects travel towards or away from us. More speciï¬cally, the term ğ’—/ğ‘ Â· ğ’ > 0 (ğ’—/ğ‘ Â· ğ’ < 0) indicates that the object travel towards (away) from us. The â€˜+veâ€™ (â€˜-veâ€™) sign of the value of Doppler convergence implies that at their observed redshift they are smaller and dimmer (larger and brighter) than typical objects. While weak gravitational lensing is caused by the mass distribution, Doppler lensing is an eï¬€ect that is purely related to the peculiar velocity of objects. We will discuss more the eï¬€ect of the Doppler lensing, and compare with standard weak gravitational lensing in Section 3.2. The aim of this paper is to investigate the applicability of the gravitational and Doppler lensing methods. The goal is to obtain mass proï¬les of cosmic structure. We test the method using relativistic cosmological simulations from gevolution and identify cosmic structures from the publicly available codes ROCKSTAR (Behroozi et al. 2013) and Pylians (Villaescusa-Navarro et al. 2018). There are some other robust void ï¬nding codes (Nadathur & Hotchkiss 2015a,b; Sutter et al. 2015) based on the parameter-free void ï¬nding algorithm ZOBOV (Neyrinck 2008) but in this work, we will use Pylians to ï¬nd the spherical underdense regions. Here our goal is to discuss relativistic ğ‘-body simulations, and some existing methods for the ray-tracing algorithm to analyse the weaklensing statistics. Both, simulations and light propagation methods are based on the perturbations around the homogeneous isotropic FLRW universe, with the metric in the conformal Poisson gauge give ğ‘‘ğ‘ = ğ‘(ğœ)[âˆ’(1 + 2Î¨)ğ‘‘ğœâˆ’ 2ğµğ‘¥ğ‘‘ğœ + (1 âˆ’ 2Î¦)ğ›¿ğ‘‘ğ‘¥ğ‘‘ğ‘¥ where ğ‘ denotes the scale factor of the background, ğ‘¥are the comoving Cartesian coordinates, and ğœ is the conformal time. Î¦ and Î¨ are the scalar perturbations, ğµis the vector perturbation and â„is the tensor perturbation which contain two spin-2 degrees of freedom of gravitational waves. In gevolution simulation, the coordinate system is ï¬xed by the gauge conditions The two scalar perturbations (Î¦ and Î¨) from gevolution having the value of the order of 10which is at least two orders of magnitude higher than the vector potentials and the tensor perturbation â„is even smaller on the scales that we are interested in (Lu et al. 2009; Thomas et al. 2015; Adamek et al. 2016a; Lepori et al. 2020). In our ï¬rst companion paper (see Fig. 2 of Ema et al. 2021), we illustrate that the two scalar perturbations (Î¦ and Î¨) contribute the maximum eï¬€ect on the light propagation and the vector potential has negligible eï¬€ect on weak-lensing statistics, hence we neglect the vector and tensor perturbations contribution throughout this work. To study the weak-lensing statistics, the weak potentials are generated from a relativistic ğ‘-body simulations and a set of null geodesic equations are integrated through a cosmological mass distribution. Our results are based on relativistic ğ‘-body simulation has 256 mass particles for a cosmological volume of (320 Mpc/â„)carried out with the relativistic code gevolution. The metric is sampled on a regular Cartesian grid of 256points, providing a spatial resolution of 1.25 â„Mpc. This allows robust detection of dark matter (DM) halos down to about 5 Ã— 10ğ‘€/â„ (we ï¬nd it by using ROCKSTAR). We choose a baseline Î›CDM cosmology with â„ = 0.67556, Î©= 0.2638, Î©= 0.048275, and a radiation density that includes massless neutrinos with ğ‘= 3.046. Linear initial conditions are computed with CLASS (Blas et al. 2011) at redshift ğ‘§= 127, assuming a primordial power spectrum with amplitude ğ´= 2.215 Ã— 10 (at the pivot scale 0.05 Mpc) and spectral index ğ‘›= 0.9619. In this paper we consider a volume of approximatelyî€î€‘ 900 â„Mpc(volume equivalent to a spherical slice between ğ‘§ = 0.2 and ğ‘§ = 0.25). This volume was simulated with the means of 21 realisations of 320 Mpc/â„. The computational time for 21 realisations of gevolution simulations on the above conï¬gurations takes about 250 CPU hours. The reason for the simulation of the required volume with 21 realisations instead of a single larger box was motivated by the requirements of the ray-tracing algorithm. The ray-tracing algorithm is the bottleneck of our pipeline, which requires substantive quantities of CPU time and large memory. The trade-oï¬€ of this approach is the lack of extremely large structures and the need of having rays crossing the boundaries between boxes. To identify the DM halos, we use the publicly available code ROCKSTAR, a phase-space friends-of-friends (FOF) halo ï¬nder. We run gevolution having a cosmological volume of (320 Mpc/â„) and read the particle snapshots at ğ‘§ = 0.22 by using ROCKSTAR which gives more than 3 Ã— 10DM halos with a minimum number of particles considered to be a halo seed is 20 per halo (by setting FOF reï¬nement fraction = 0.7 and 3D-FOF linking https://bitbucket.org/gfcstanford/rockstar/src/main/ Figure 1. The structure of the cosmic voids and halos in a relativistic cosmological simulation. The left panel of the ï¬gure shows the clustered voids having diï¬€erent ranges of radii within a 10 â„Mpc slice of the gevolution simulation at ğ‘§ = 0.22. The grey colour indicates the DM distributions whereas the diï¬€erent colour circles are the voids of diï¬€erent ranges of radii in units of â„Mpc. The right panel of the ï¬gure shows the clustered halos having diï¬€erent ranges of masses (all values in the right side legends indicate in the order of 10 magnitudes and in units of â„ simulation at ğ‘§ = 0.22. The grey colour indicates the DM distributions whereas the diï¬€erent colour dots are the halos of diï¬€erent ranges of masses. length = 0.28, for more details about these please see Behroozi et al. 2013). This sets our minimal halo mass (halo radius) to ğ‘€= 5 Ã— 10â„ğ‘€(ğ‘…= 0.15 â„Mpc) and the maximal halo mass (halo radius) to ğ‘€= 1.6 Ã— 10â„ğ‘€(ğ‘…= 2.56 â„Mpc). To analyse the eï¬€ect of the mass of halos (ğ‘€), we subdivide the halos into four different mass ranges: i) 10â„ğ‘€< ğ‘€< 10â„ğ‘€ ğ‘€< 10â„ğ‘€, and iv) ğ‘€> 10â„ğ‘€. Figure 1 (right panel) shows the diï¬€erent clustering ranges of halo masses and the particle density distribution within a 10 â„Mpc slice of the gevolution simulation at ğ‘§ = 0.22. The redshift of ğ‘§ = 0.22 was chosen on the basis of the relevance of the Doppler lensing, which dominates for ğ‘§ < 0.3 (Bacon et al. 2014, cf. Sec. 4 for a further discussion). The diï¬€erent colour dots indicate the halos having different masses and the legends represent the value of the ranges of the halo masses in units of â„ğ‘€. We ï¬nd that the massive halos are located in the most clustered zone of the density of the particle distribution whereas the less massive halos are located in the less clustered zone of the density of the particle distribution. The ï¬‚uctuation of the number of halo counts as a function of the masses of halos for 21 realisations of gevolution simulations at redshift ğ‘§ = 0.22 is shown in the bottom panel of Fig. 2. We employ Pylians (Villaescusa-Navarro et al. 2018), a publicly available python code, to ï¬nd the cosmic voids. It starts with cal- MNRAS 000, 1â€“13 (2021) culating a smoothly-varying density ï¬eld from the particle positions within the gadget output of the gevolution simulation. We run gevolution having a cosmological volume of (320 Mpc/â„) and read the particle snapshots at ğ‘§ = 0.22 by using Pylians which gives more than 5.5 Ã— 10cosmic voids (by setting the threshold to âˆ’0.5, which identiï¬es voids with mean overall density contrast below this threshold). The code Pylians assumes the cosmic void as a sphere and the centre of this sphere is used as the void centre. It provides the information of the centres of the void positions and the radii of the cosmic voids. This sets the minimal cosmic void radius to ğ‘…= 5 â„Mpc and the maximal void radius to ğ‘…= 44 â„Mpc. Similar to halos, we also divide four regions of voids having diï¬€erent ranges of radii: i) 5 â„Mpc â‰¤ ğ‘…< 15 â„Mpc ii) 15 â„Mpc â‰¤ ğ‘…< 25 â„Mpc iii) 25 â„Mpc â‰¤ ğ‘…< 35 â„Mpc, and iv) 35 â„Mpc â‰¤ ğ‘…< 45 â„Mpc. The clustering range of voids having diï¬€erent radii and the particle density distribution within a 10 â„Mpc slice of the gevolution simulation at ğ‘§ = 0.22 is depicted in Fig. 1 (left panel). The diï¬€erent circles with diï¬€erent colours indicate the voids having diï¬€erent ranges of radii and the colour bar shows the value of the ranges of the void radii in units of â„Mpc. As expected the voids are situated where the particle density distribution is low in our cosmological simulation volume. We demonstrate the variation of the number of void counts as a function of the radii of voids for 21 realisations of gevolution simulations at redshift ğ‘§ = 0.22 in the top panel of Fig. 2. https://github.com/franciscovillaescusa/Pylians3 â€¢ optical scalar methods: by solving optical scalar equations (Kan- â€¢ null geodesic methods: by integrating null geodesic equations back- â€¢ statistical methods: measurements of the correlation function for Figure 2. Variations of the number of halo and void counts for 21 realisations of gevolution simulations at redshift ğ‘§ = 0.22. The top panel shows theâ€¢ multiple-lens-plane methods: by considering a ï¬nite number of number of void counts as a function of the radii of voids and the bottom panel shows the number of halo counts as a function of the masses of halos. The ray-tracing algorithm implemented in this paper is based on solving null geodesics equations. The metric coeï¬ƒcients are obtained directly from relativistic simulations. From these we calculate the Christoï¬€el symbols and explicitly solve the null geodesics equations using the python package scipy.odeintwhich uses the classical Runge-Kutta (RK-45) integration scheme. To fulï¬ll the condition for light-like geodesic we check the null condition at each step of the integration. In order to minimise deviations from the null condition, we choose small values of 10and 10for the relative and absolute tolerance of the integrator, respectively. https://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.odeint.html The statistical behaviors of gravitational lensing have been extensively studied by many researchers (Schneider & Weiss 1988; Paczynski & Wambsganss 1989; Futamase & Sasaki 1989; Lee & Paczynski 1990; Holz & Wald 1998; Killedar et al. 2012). Watanabe & Tomita (1990) solved the relativistic optical equations to obtain the realistic distance-redshift relation in an inhomogeneous universe and observed that the inï¬‚uence of shear along the line-of-sight is modest when the scale of inhomogeneities is larger than the galactic scale. Recently, Adamek et al. (2019) also solved the relativistic optical equations and analysed the bias of the Hubble diagram from cosmological LSS. By using a Newtonian N-body simulation, Tomita (1998) numerically integrate the null geodesic equations and observed that the diï¬€erent cosmologies have diï¬€erent angular diameter distances. Killedar et al. (2012) developed a three-dimensional raytracing algorithm by solving null geodesic equations and analysed the probability distribution function (PDF) of weak-lensing magniï¬cation and shear due to the mass distribution of source redshift of ğ‘§= 0.5. By using a statistical method, Kaiser (1992) and Jain & Seljak (1997) proposed a new measurement of the two-point correlation function and power spectrum due to the weak gravitational lensing of distant galaxies. To investigate the weak-lensing convergence and shear, Jain et al. (2000) developed a ray-tracing algorithm by considering ray shooting methods (RSM). Their algorithm follows the multiple-lens-plane method and found that the PDF and power spectrum of convergence are sensitive to the matter density. Hamana et al. (2000) also considered the multiple-lens-plane method and analysed the eï¬€ect of weak-lensing magniï¬cation bias on the luminosity function of high-redshift quasars. The following is a list of the numerous methodologies that have been suggested for assessing cosmic properties: towski 1969; Dyer & Roeder 1974; Watanabe & Tomita 1990; Nakamura 1997; Hamana 1999; Adamek et al. 2019). ward from the observer to the sources where the weak perturbations are generated from ğ‘-body simulations (Tomita 1998; Killedar et al. 2012; Lepori et al. 2020). ellipticity, and the corresponding angular power spectrum (Blandford et al. 1991; Kaiser 1992; Jain & Seljak 1997; Metcalf 1999). planes normal to light rays between an observer and a source, most commonly ray shooting methods (RSM Schneider & Weiss 1988; Paczynski & Wambsganss 1989; Lee & Paczynski 1990; Jaroszynski et al. 1990; Hamana et al. 2000; Jain et al. 2000). There are diï¬€erent methods that are available to investigate weaklensing statistics. In this paper we adopted the ray bundle method (RBM Fluke et al. 1999, 2002; Fluke & Lasky 2011). This method is similar to the RSM, but the methodology is preferred by other backward-ray-tracing codes (Jain et al. 2000; Premadi et al. 2001) instead of using grid-based techniques to measure weak-lensing statistics around the source plane. For a pedagogical comparison between RBM and RSM for weak-lensing magniï¬cation, we refer the reader to Fig. 6 of Fluke et al. (1999). The RBM considers bundle of light rays instead of a single light ray and each bundle consists of eight light rays with a central light ray (Fluke et al. 1999, 2002). The advantage of using a bundle of light rays rather than a single light ray is that our algorithm can calculate both magniï¬cation and shear signals while other methods use a diï¬€erent technique to compute the shear signal. From the deformation of the shape of the bundle, we can calculate the weak-lensing statistical quantities i.e. convergence, shear, and magniï¬cation. In this work, a ray-tracing algorithm is developed that relies on the design of the RBM, and the photon path can be obtained by integrating a set of null geodesic equations backwardv for each category of void radii and halo masses, we only select 100 from observer to source. In our ray-tracing algorithm, instead of projecting a single photon (as RSM does), we have projected a bundle of photons (consisting of a central null geodesic surrounded by eight null geodesics) havingvi when the light bundle exits the simulation box it enters it on the a circular shape. As photon travels larger distances throughout the mass distribution of LSS in the universe, the circular shape of the bundle will be distorted because of the magniï¬cation (magniï¬ed or de-magniï¬ed) and shear (stretching along an axis). As we are integrating backward from observer to source the magniï¬cation (ğœ‡) and shear(ğ›¾) can be calculated as where ğ´represents the area of the source, ğ´is the area of the image, a & b are the semi-major and semi-minor axes of an ellipse, respectively. From the magniï¬cation and shear information, we can calculate the weak-lensing convergence (ğœ…) by re-writing Eqn. 2 asviii from the solution of the geodesics we get the positions of the bundles To avoid considering a large simulation box (which is computationally time-consuming), we take the comoving length of our simulation box to be 320 â„Mpc. At ï¬rst we save the scalar potentialsx from the information of the semi-major and semi-minor axes of an and particle snapshots for diï¬€erent redshift by running the gevolution simulation (ensuring that the comoving length of each box to be 320 â„Mpc). When a photon reaches the edge of the box thenxi ï¬nally, we stack weak-lensing magniï¬cation and shear for voids we read another snapshot at the corresponding redshift having the same comoving length and take the trilinear interpolation scheme to calculate the value of the potential (as we use periodic boundary conditions for the gevolution simulation) so that at each step of the integration it will update the Christoï¬€el symbols. Note that as the photon passes from box to box, the ï¬nal direction of the exiting photon is the same as the initial direction of the entering photon, ensuring that the path of photon between the observer and the source is consistent. Note that the ray-tracing algorithm we developed can project the bundle of light rays from any position of our simulation box. For more details about our ray-tracing algorithm we refer thei by changing the initial conditions we initially run 21 gevolution reader to our companion paper (Ema et al. 2021). To compute the weak-lensing statistics by stacking cosmic voids and halos, we follow the following steps: i at ï¬rst we run 21 gevolution simulations (having identical cosmological parameter settings, but use a diï¬€erent random seeds) by changing the initial conditions to get the particle snapshots, and thenii the choice of 21 of snapshots was motivated by the need to simulate by using ROCKSTAR and Pylians we ï¬nd out the necessary information of the halos and voids at redshift ğ‘§ = 0.22; ii the choice of 21 of snapshots was motivated by the need to simulateî€î€‘ approximately the volume of900 â„Mpc, i.e. equivalent of the volume of a slice between ğ‘§ = 0.2 and ğ‘§ = 0.25 (as this is more relevant for the Doppler lensing than for gravitational lensing we comment on it in the next subsection); iii we keep the observer ï¬x at ğ‘§ = 0, and by slightly varying the projection angles we project bundles of photons in the directions of pre-selected cosmic structures; iv the structures are selected as follows: for voids we consider: three diï¬€erent ranges of radii: 5 â„Mpc â‰¤ ğ‘…< 15 â„Mpc, MNRAS 000, 1â€“13 (2021) 15 â„Mpc â‰¤ ğ‘…< 25 â„Mpc and 25 â„Mpc â‰¤ ğ‘…< 35 â„Mpc), and for halos three diï¬€erent ranges of masses: ğ‘€< objects (i.e. voids/halos). For each object void/halo, we solve 10000 bundles of geodesics, which is suï¬ƒcient to obtain a clear signal and minimises time and memory issues with a larger number of object; other side. Due to small angular scales of observed structures (i.e. we investigate lensing of particular structures rather than the cosmological signal of lensing power spectrum), low redshift, and the fact that bundles are shot at an angle to the side of the box, the bundles do not encounter the same structures on their way to the observed voids/halos (i.e. it only takes 4 boxes to reach ğ‘§ = 0.44 and 6 to reach ğ‘§ = 0.6); determine the normal vectors from the observerâ€™s location to each projection direction using the Euler-Rodrigues formula. Each of these normal vectors corresponds to the initial direction of a particular ray bundle; of photons for each integration step and to ï¬t it into an ellipse we use an ellipse ï¬tting algorithm to compute the area, semi-major and semi-minor axes of an ellipse; ï¬nal shape of the bundle to the area of the initial shape of the bundle since we integrate backward from the observer to the sources; ellipse, we compute the shear by using Eqn. 9 and then we compute the weak-lensing convergence by using Eqn. 10; having diï¬€erent ranges of radii (100 voids for each radius range) and halos having diï¬€erent ranges of masses (100 halos for each mass range), the results are presented in Figs. 4 and 5. To calculate the Doppler convergence, we solve Eqn. 6 and analyse the statistical properties by stacking cosmic voids and halos. We follow the following steps to compute the Doppler convergence: simulations (having identical cosmological parameter settings, but use a diï¬€erent random seeds) and then from the particle snapshots of gevolution simulations we ï¬nd out the necessary information about the halos and voids at redshift ğ‘§ = 0.22 by using ROCKSTAR and Pylians (these are the same simulations as for the weak-lensing analysis); the volume of a slice between ğ‘§ = 0.2 and ğ‘§ = 0.25. This is important for obtaining an unbias Doppler lensing signal for cosmic voids: the Doppler lensing is generated by peculiar velocities of observed galaxies, thus a minimal number of galaxies per an observed structure is required. For galaxy clusters this is not an issue (i.e. plenty of galaxies within large halos), however for voids this possesses challenges, especially for small voids where there can be no galaxies inside. For this reason we focus on voids having radii 20 âˆ’ 25 Mpc/â„ (as the number of halos inside the voids is very few for smaller voids so we consider a moderate range of void radius) at redshift ğ‘§ = 0.22 and identify halos within these voids as well as halos beyond the radius of the associated voids (we ï¬nd 1433 such voids); Table 1. Details of the number of halos and voids from 21 realisations of gevolution simulations at redshift ğ‘§ = 0.22. The information of voids and halos are extracted from the publicly available codes Pylians and ROCKSTAR, respectively. iii then we compute the distances from the centre of the cluster/void to the centre of the observed halo; iv we perform the dot product between the normalised velocities (ğ’—/ğ‘) of the halos associated with clusters/voids and the direction vectors (ğ’) between the observer and the observed halos (cf. Fig. 3); v then we multiply the rest of the parts of Eqn. 6 with the result of the dot product and calculate the value of Doppler convergence; vi we stack Doppler convergence value for voids having radii 20 âˆ’ 25 Mpc/â„, and using the same procedure we also computed the Doppler convergence by stacking halos; vii ï¬nally, when presenting results (cf. Figs. 6 â€“ 9) we scale the radius by a factor of cos Î˜. Formally, speaking one would expect to see a plot of the Doppler convergence as a function of velocity (cf. eq. 6), i.e. ğœ…âˆ¼ ğ’— Â· ğ’ âˆ¼ ğ‘£ cos Î˜. However, when presenting the results of the Doppler convergence, instead of ğ‘£ we use ğ‘…. The motivation is as follows: for a top-hat void the gravitational potential is quadratic, hence ğœ™ âˆ¼ ğ‘… proportional to ğ‘…. For more realistic voids, this is no longer true, but it provides a useful way of presenting results, i.e. as a function of distance from the center of the void (which makes it more comparable with results of the gravitational lensing). The other alternative would be to remove the factor of cos Î˜ from the observed convergence by dividing the observed convergence the factor of cos Î˜ (i.e. ğœ…/cos Î˜), this however would lead to problems with cos Î˜ â‰ˆ 0, and thus we do not re-scale the convergence by 1/cos Î˜ by instead we re-scale the radius. Consequently, Figs. 6 â€“ 9 present the results as ğœ…âˆ¼ ğ‘… cos Î˜. It is important to mention here that we develop the Doppler lensing algorithm that computes the Doppler convergence by considering fully three-dimensional (3D) signal stacking as a function of the radius of cosmic structures. Due to the consideration of 3D stacking, the smaller void consists of very few galaxies (or even completely empty) as compared to the larger void. Thus, even if the number of smaller voids are larger (cf. Fig. 2), larger voids oï¬€er more halos per void. To describe the results obtained from this work, at ï¬rst we will discuss the weak-lensing with stacked clusters and voids, and then discuss the Doppler lensing with stacked clusters and voids. We will also discuss the comparison between Doppler lensing convergence and weak-lensing convergence. How is the weak-lensing signal impacted by the diï¬€erent masses of the halos? To ï¬nd out the answer we stacked the weak-lensing signal for clusters with various masses. We projected bundles of photons in the directions of halos with diï¬€erent masses and computed the Figure 3. Schematic representation of the Doppler lensing observation for voids. weak-lensing convergence, shear and magniï¬cation by using our raytracing algorithm that we described in Section 2.3. For each mass range of the halo, we projected bundles of lights in the directions of galaxy cluster by slightly varying the projection angle and stacked 100 galaxy clusters to analyse the statistical property of the weaklensing statistics. Then by using Eqn. 3 we computed the projected surface mass density (which is proportional to the convergence) and diï¬€erential surface mass density (which is proportional to the shear). Table 1 lists the number of voids and halos from 21 realisations of gevolution simulations at redshift ğ‘§ = 0.22. In Fig. 4, the top panel shows the variation of the convergence as a function of impact parameter (the distance from the centre of the halos to the centre of the bundles of photons). The numerical result of the weak-lensing magniï¬cation is higher near the centre of the halos while it gradually decreases with the increase of impact parameter. As expected the weak-lensing magniï¬cation is slightly higher when the bundle of light passes near the massive halos than the less massive halos. The variation of the weak-lensing tangential shear as a function of impact parameter is depicted in the bottom panel of Fig. 4. Similar to weak-lensing magniï¬cation we observed that the value of the tangential shear is maximum near the centre of the halos and gradually decreases when the distance from the centre of the halo to the centre of the bundle increases. We also observed that the characteristic plot of the tangential shear is opposite to that of the weak-lensing magniï¬cation, with smaller halos having a slightly higher amplitude. As we have considered the absolute magnitude value of the shear so the characteristics, what we observed for shear, are exactly opposite that we observed for weak-lensing magniï¬cation. Figure 4. Variation of the weak-lensing statistical quantities as a function of the impact parameter (the distances from the centre of the halos to the centre of bundles of photons). The top panel shows the projected surface mass density (proportional to the weak-lensing magniï¬cation) as a function of the impact parameter for clustering masses of the halos. The diï¬€erent colour dots indicate the diï¬€erent ranges of masses of the halos and the error bars represent the 1ğœ for each bin. The bottom panel shows the diï¬€erential projected surface mass density (proportional to the weak-lensing shear) as a function of the impact parameter for clustering masses of the halos. We artiï¬cially shift the last two categories of halo masses bins to improve the visual clarity. Our result is also consistent with the result of Schmidt et al. (2012) (cf. their Fig. 4) where they have considered the eï¬€ects of galaxy sizes and magnitudes on the measurement of weak-lensing magniï¬cation. The projected surface mass density and diï¬€erential surface mass density for voids with diï¬€erent radii are depicted in Fig. 5. The value of the magniï¬cation and shear is negative inside voids due to the low-density distribution. The key diï¬€erence between the gravitational lensing with stack clusters and the gravitational lensing with stack voids is the relative diï¬€erence between the convergence signal and shear signal. For clusters, the projected mass density (Î£ which is proportional to lensing convergence) and diï¬€erential surface mass density (Î”Î£ which is proportional to shear) are of the order of 100ğ‘€ğ‘ğ‘. For voids the convergence is small (Î£ âˆ¼ 1ğ‘€ğ‘ğ‘) is even smaller but the shear (Î”Î£ âˆ¼ 0.1ğ‘€ğ‘ğ‘). Still, as seen from Figs. 4 and 5 100 objects will suï¬ƒce to detect a weak-lensing signal. This should be contrasted with the results of the next section where the detection of the Doppler lensing at this redshift requires a factor of 10 large number of objects (âˆ¼ 1000). MNRAS 000, 1â€“13 (2021) Figure 5. Variation of the weak-lensing statistical quantities as a function of the impact parameter (the distances from the centre of the voids to the centre of bundles of photons) normalise by the respective void radius. The top panel shows the projected surface mass density as a function of the impact parameter for clustering radii of the voids. The diï¬€erent colour dots indicate the diï¬€erent ranges of radii of the voids and the error bars represent the 1ğœ for each bin. The bottom panel shows the diï¬€erential projected surface mass density as a function of the impact parameter for clustering radii of the voids. We artiï¬cially shift the last two categories of void radii bins to improve the visual clarity. Table 2. Doppler lensing with stacked voids: number of voids in each radial bin from 21 realisations of gevolution simulations at redshift ğ‘§ = 0.22. The information of voids and halos are extracted from the publicly available codes Pylians and ROCKSTAR, respectively. The third column shows the number of halos inside the corresponding number of voids and the fourth column shows the average number of halos per void. Figure 6. Doppler convergence by stacking 1433 voids having radii 20 âˆ’ 25 â„Mpc at ğ‘§ = 0.22. The top left ï¬gure shows the average Doppler convergence for a certain range of binned value of ğ‘…/ğ‘…cos Î˜ with 1 ğœ error bar (blue shaded region). The bottom left panel of the ï¬gure shows the Doppler convergence as a function of ğ‘…/ğ‘…cos Î˜. The colour bar indicates the dot product between the velocity of the galaxies inside the voids and the directions of photon propagation. In the colour bar, the value of ğ’—/ğ‘ Â· ğ’ > 0 (ğ’—/ğ‘ Â· ğ’ < 0) indicates that the object travel towards (away) from us. The blue line is the best ï¬t line of the data. The right panel of the ï¬gure shows the Doppler convergence as a function of ğ‘…/ğ‘… galaxies inside the voids. Finally, it is also apparent from Fig. 5 that a void ï¬nding algorithm overestimates the apparent size of a void (i.e. a void is approximated with a sphere and the radius of a sphere is treated as ğ‘…). The apparent edge of the void (i.e. as observed on the sky) coincides with the maximum of the convergence and minimum of the shear, which as seen in Fig. 5 is approximately at ğ‘…/ğ‘…â‰ˆ 0.6 âˆ’ 0.7. Thus, the actual size of the void (as inferred from the shape of the lensing signal) does not coincide with the value of the â€˜radiusâ€™ produced by the implemented void-ï¬nder. While more robust void ï¬nding algorithms (Nadathur & Hotchkiss 2015a,b; Sutter et al. 2015) does not suï¬€er such a problem, it needs to be noted that the nominal value of the radius of the void does not aï¬€ect the discussed result. The ray-tracing algorithm is not sensitive to such a scaling (it is only aï¬€ected by the matter distribution along the line of sight, not by any artiï¬cial deï¬nition of the radius of a void). Here we will discuss some results of Doppler lensing and how it diï¬€ers from the standard weak gravitational lensing eï¬€ect. Figure 6 shows the variation of Doppler convergence by stacking 1433 voids having radii 20 âˆ’ 25 â„Mpc. The top left of Fig. 6 shows the mean Doppler convergence (blue dots) for certain ranges of distance bins and the blue shaded region shows the 1ğœ variation of data. The bottom left ï¬gure shows the Doppler convergence as a function of ğ‘…/ğ‘… cos Î˜, the blue line is the best ï¬t line of the Doppler convergence data, and the colour bar indicates the dot product of the velocities of the galaxies (normalised by the speed of light) and the propagation directions of the photons. The value ğ’—/ğ‘ Â· ğ’ > 0 (ğ’—/ğ‘ Â· ğ’ < 0) in the colour bar indicates that the object travel towards (away) from us. The â€˜+veâ€™ (â€˜-veâ€™) sign of the value of Doppler convergence implies that at their observed redshift they are smaller and dimmer (larger and brighter) than typical objects (Bolejko et al. 2013; Bacon et al. 2014). We emphasise that ğ’— is a 3ğ· vector and hence the stacking of the Doppler lensing signal is a full 3D stacking. From Fig. 6 it is apparent that the value of Doppler convergence due to underlying matter distributions in the void increases as the distance between the center of the void and the galaxies within the void increases, similar to standard weak-lensing statistical quantities. It is also clear that the observer could measure the magniï¬ed image Figure 7. Doppler convergence by stacking halos at ğ‘§ = 0.22. The top left ï¬gure shows the average Doppler convergence for a certain range of binned value of ğ‘…/ğ‘…cos Î˜ with 1ğœ error bar (blue shaded region). The bottom left panel of the ï¬gure shows the Doppler convergence as a function of ğ‘…/ğ‘… The colour bar indicates the dot product between the velocity of the centre of the galaxies to the other galaxies and the directions of photon propagation. In the colour bar, the value of ğ’—/ğ‘ Â· ğ’ > 0 (ğ’— /ğ‘ Â· ğ’ < 0) indicates that the object travel towards (away) from us. The blue line is the best ï¬t line of the data. The right panel of the ï¬gure shows the Doppler convergence as a function of ğ‘…/ğ‘…. The colour bar indicates the magnitude of the velocities of the galaxies. of the source at the edge of the void for Doppler lensing analysis in comparison to the result of standard weak-lensing statistics. The reason for the higher Doppler convergence value at the voidâ€™s edge is that the velocity distribution (since the Doppler convergence is proportional to the velocity of the source galaxies) is higher there than in the centre and the right side of Fig. 6 indirectly supports the validation of the statement where the variation of Doppler convergence as a function of ğ‘…/ğ‘…is depicted. Another reason for getting higher Doppler convergence value at the voidâ€™s edge is higher particle density distribution there than in the centre, and the right side of Fig. 6 implicitly supports the validation of the argument (as most of the galaxies inside the voids are situated near the edge of the voids than the centre) and the colour bar indicates the velocities of the galaxies inside the voids. A similar ï¬gure but for stacking halo analysis is depicted in Fig. 7. It is found that the Doppler convergence properties by stacking halos are very close to that of standard weak gravitational lensing. Since the halos have a smaller radius as compare to voids so we consider the eï¬€ect of the galaxies more than twice the radius of the halos from its centre to compute the Doppler convergence. Table 2 lists the number of voids and the associated halos from 21 realisations of gevolution simulations for diï¬€erent ranges of radii MNRAS 000, 1â€“13 (2021) of voids at redshift ğ‘§ = 0.22. Figure 8 shows the variation of Doppler convergence as a function of ğ‘…/ğ‘…cos Î˜ by stacking voids having diï¬€erent ranges of void radii (void radii: see Table 2). To generate Fig. 8, we have considered all the voids for the respective ranges of void radii and obtained the Doppler lensing signal by stacking voids. It is found that Doppler convergence for diï¬€erent ranges of radii of voids is higher at the void edges and the observer could also measure the magniï¬ed image of the source for voids with larger radii than the smaller ones. Because, the number of galaxies in larger voids is greater than in smaller voids, and the velocity distribution and density distribution of galaxies are higher at the voidâ€™s edge. Finally, Fig. 9 shows the variation of the weak-lensing convergence and Doppler convergence as a function of impact parameter by stacking voids. To compare the weak-lensing and Doppler lensing statistics as a function of redshift, we have projected the bundles of photons in the direction of the centres of the halos and stacked them to analyse the statistical properties of both lensings. A comparison for Doppler lensing convergence and weak-lensing convergence as a function of redshift by stacking halos is depicted in Fig. 10. We have stacked weak-lensing and Doppler lensing signals by taking halos for diï¬€erent snapshots of gevolution simulations at diï¬€erent Figure 8. Variation of the Doppler convergence as a function of the impact parameter for clustering radii of voids. The positive (negative) value of Doppler convergence indicates the object moving towards us (away from us). The diï¬€erent colour dots indicate the diï¬€erent ranges of radii of the voids and the error bars represent the statistical error for each bin. We artiï¬cially shift the last two categories of void radii bins to improve the visual clarity. redshifts. The shaded regions (blue and green) indicate 1ğœ variation for each redshift bin of the data. At lower redshift, the convergence value due to Doppler lensing dominates over the standard weak gravitational lensing, whereas at higher redshift, the convergence value due to Doppler lensing drops (since the factor in brackets in Eqn. 6 decreases in amplitude) while the convergence value due to weaklensing increases. Our result is also compatible with the ï¬ndings of Bolejko et al. (2013) and Bacon et al. (2014). This paper has numerically investigated signatures of weak gravitational lensing and Doppler lensing within relativistic ğ‘-body simulations. We used the code gevolution to produce snapshots both in terms of particle distribution as well as relativistic gravitational potentials. The novelty of this paper is that we implemented the RBM to integrate the null geodesics backward from the observer to the sources to obtain the path of the photon. Although the RBM has been implemented in the past within ğ‘-body simulations, it is the ï¬rst time it has been implemented in relativistic simulations. In addition, we also implemented the Doppler lensing method into our analysis. In our analysis, we considered various categories of halos and voids and utilized information from statistical quantities such as convergence, shear, and magniï¬cation. For halos, we considered three categories of halo masses and stacked them to extract the cosmological information from weak-lensing and Doppler lensing analysis. For voids, we considered three categories of void radii and stacked them to extract the cosmological information from weak-lensing and Doppler lensing analysis. The results for halos for the gravitational lensing were as expected: the weak-lensing magniï¬cation and shear are higher near the centre Figure 9. Variation of the weak-lensing convergence and Doppler convergence as a function of the impact parameter by stacking voids having radii 20â„Mpc â‰¤ ğ‘…< 25â„Mpc. of the halos while it gradually decreases with the increase of impact parameter. We also observed a slight variation of the measurement of weak-lensing magniï¬cation and shear for diï¬€erent categories of halo masses. For voids, we observed the amplitude of the convergence to be the largest at the centre while the shear was the highest near the edge of voids. Qualitatively, such an outcome is not novel as it was predicted by other methods, but the importance of the results presented in this paper is that the analysis was done based on relativistic simulations rather than relied on Newtonian ğ‘-body simulations or perturbative methods. The most important result of this paper was the analysis of Doppler lensing. We examined the Doppler lensing statistics for stacked halos and voids. For halos, we showed that the characteristic results of Doppler convergence by stacking halos are very close to that of standard weak gravitational lensing. Since the Doppler lensing is sourced by peculiar velocities, the Doppler lensing signal averages out near the center of halo. It is only at the outskirts of these halos when a slight trend can be observed, cf. Fig. 6. We speculate that this eï¬€ect could in principle aï¬€ect type Ia Supernovae and could potentially Figure 10. A comparison between Doppler lensing convergence and the weak-lensing convergence (both for stacking halo analysis) as a function of redshift. For weak-lensing analysis, we have considered 100 halos having mass ğ‘€> 10â„ğ‘€. For Doppler lensing analysis, we have considered all of the halos having similar mass range but radius ğ‘…> 1 â„Mpc. The blue dots represent the mean Doppler convergence and the green dots represent the mean weak-lensing convergence. The shaded regions indicate 1ğœ variation of the statistical error for each bin. lead to a weak correlation between the cosmological environment of a host galaxy and the peak magnitude of the observed supernova, in a similar way as one observes a weak correlation between the peak magnitude and the mass of a host galaxy (Sullivan et al. 2010). Similarly, the investigation of the Doppler lensing signal produced by cosmic voids rendered interesting results. The most important one was related to diï¬ƒculties in extracting the Doppler lensing signal produced by cosmic voids. The distinct diï¬€erence between gravitational lensing and Doppler lensing is the origin of the signal. For gravitational lensing, an observed galaxy is far beyond the lens that produces the gravitational lensing signal. Thus, for gravitational lensing, the precise location of an observed galaxy is less relevant and hence one can always ï¬nd a suitable number of objects behind the lens to measure and analyse the gravitational lensing signal. For the Doppler lensing signal, however, the source is at the "lens". While for clusters there are ample galaxies, for voids this causes potential problems with detectability. Since there is a very little number of galaxies inside voids, we had to consider voids with a radius between 20 and 25 â„Mpc. To detect a suï¬ƒcient number of such voids one requires large volumes. However, larger volumes imply larger redshifts, which in turn leads to a lower amplitude of the Doppler lensing. As the amplitude of the Doppler lensing decreases with redshift, rather than increases as it is the case of the gravitational lensing, we had to settle with the redshift of around ğ‘§ = 0.2 (to be precise ğ‘§ = 0.22). In our studies, we found that we required more than 1000 voids to obtained a stacked signal that could in principle be measured. For this we had to simulate the volume of approximately (900 â„Mpc), and within this volume we identiï¬ed the total number of 1433 voids with a radius between 20 and 25 â„Mpc. The considered volume corresponds to a volume between redshift slice of ğ‘§ = 0.2 and ğ‘§ = 0.25. MNRAS 000, 1â€“13 (2021) voids are distributed and concluded that the majority of galaxies within the voids are closer to the edges than the centres. We demonstrated that Doppler lensing predicts that the observer could see the magniï¬ed picture of the source at the voidâ€™s edge, despite the fact that the standard weak-lensing fails to predict. In this work, we have also demonstrated the comparison between standard weak gravitational lensing and Doppler lensing. For structures (i.e. "lenses") at lower redshifts, the convergence is dominated by the Doppler lensing, whereas if the lens is at high redshift the convergence is dominated by the gravitational lensing. The results of this paper also indicate that while the optimal redshift for measuring the Doppler lensing on voids is approximately ğ‘§ = 0.2, the most optimal survey strategy (targeting the same structures and taking use of both Doppler lensing and gravitational lensing) should focus on redshift around ğ‘§â‰ˆ 0.3 âˆ’ 0.4. At this redshift range there is a suï¬ƒcient number of voids/halos to take advance to this new strategy based on both the weak gravitational lensing and Doppler lensing. The strategy would aim at targeting galaxies around the halos/voids (ğ‘§â‰ˆ 0.3 âˆ’ 0.4) with the aim to extract the Doppler lensing signal and background galaxies (ğ‘§â‰ˆ 0.6 âˆ’ 0.8) with the aim to extract the gravitational lensing signal. With the gravitational lensing the signal is mostly encoded in the amplitude and to some extent in the shape, cf. Figs. 4 and 5; whereas with the Doppler lensing signal the signal can be extracted from the slope, cf. Figs. 6 and 7. Cosmic voids occupy approximately 70% of our universe with very little content of baryonic matter. The scarcity of baryonic matter inside voids (which means very little contamination from complex baryonic astrophysics) makes the voids pristine environments, which are ideal to test properties of dark matter and the nature of gravity. Over the recent years, there has been a growing interest in investigation properties of cosmic voids (Park & Lee 2007; Bos et al. 2012; Pan et al. 2012; Krause et al. 2012; Sutter et al. 2012; Bolejko et al. 2013; Ceccarelli et al. 2013; Hamaus et al. 2014; Nadathur & Hotchkiss 2014; Hamaus et al. 2015; Nadathur 2016; SÃ¡nchez et al. 2016; Mao et al. 2017; Verza et al. 2019; Panchal et al. 2020; Li et al. 2020; Raghunathan et al. 2020). The results of this paper should be treated as a proof-of-concept that investigated and showed the possibility of using the Doppler lensing in conjunction with the gravitational lensing to map the matter distribution inside cosmic voids. The results presented here are relevant to ongoing and future low-redshift spectroscopic surveys such as, for example, the DESI Bright Galaxy survey (Ruiz-Macias et al. 2020; Zarrouk et al. 2021). Even though DESI is not a lensing survey, it will provide spectroscopic data that will be used for Doppler lensing, which will be utilised in conjunction with gravitational lensing, and other methods in order to better map the underlying matter distribution within cosmic voids. In our future works, we will combine the standard weak gravitational lensing and Doppler lensing signals to extract the DM proï¬les, and also consider the higher-order statistics i.e. angular power spectrum, bi-spectrum, etc. due to underlying matter distributions in and around the cosmic voids/halos at higher redshift. In addition, the covariance eï¬€ects on the joint measurement of the Doppler lensing statistics using halos and voids, and the constraints of cosmological parameters due to these lensing eï¬€ects would be interesting and we left it for our future works. The authors would like to thank Julian Adamak for his discussions during the early stages of this work, and Florian List for his reading and comments on this paper. We further acknowledge the use of Artemis at The University of Sydney for providing HPC resources that have contributed to the research results reported within this paper. The authors thank the gevolution team for making the code publicly available, and the anonymous referee for providing useful remarks that contributed to the ï¬nal form of this paper. MRH is supported by the Australian Government Research Training Program (RTP) Scholarships. MRH would like to thank Lawrence Dam and William H. Oliver for their discussions during this work. KB acknowledges support from the Australian Research Council through the Future Fellowship FT140101270. This research work made use of the free Python packages numpy (Harris et al. 2020), matplotlib (Hunter 2007), h5py, eqtools, and mpi4py (Dalcin et al. 2005). The data generated as part of this project may be shared with the corresponding author upon reasonable request.