User interactions with recommender systems (RSs) are aî€ected by user selection bias, e.g., users are more likely to rate popular items (popularity bias) or items that they expect to enjoy beforehand (positivity bias). Methods exist for mitigating the eî€ects of selection bias in user ratings on the evaluation and optimization ofRSs. However, these methods treat selection bias as static, despite the fact that the popularity of an item may change drastically over time and the fact that user preferences may also change over time. We focus on the age of an item and its eî€ect on selection bias and user preferences. Our experimental analysis reveals that the rating behavior of users on the MovieLens dataset is better captured by methods that consider eî€ects from the age of item on bias and preferences. We theoretically show that in a dynamic scenario in which both the selection bias and user preferences are dynamic, existing debiasing methods are no longer unbiased. To address this limitation, we introduce DebiAsing in the dyNamiC scEnaRio (DANCER), a novel debiasing method that extends the inverse propensity scoring debiasing method to account for dynamic selection bias and user preferences. Our experimental results indicate thatDANCERimproves rating prediction performance compared to debiasing methods that incorrectly assume that selection bias is static in a dynamic scenario. To the best of our knowledge,DANCERis the î€›rst debiasing method that accounts for dynamic selection bias and user preferences inRSs. â€¢ Information systems â†’ Recommender systems; Evaluation of retrieval results. ACM Reference Format: Jin Huang, Harrie Oosterhuis, and Maarten de Rijke. 2022. It Is Diî€erent When Items Are Older: Debiasing Recommendations When Selection Bias and User Preferences Are Dynamic. In Proceedings of the Fifteenth ACM International Conference on Web Search and Data Mining (WSDM â€™22), February 21â€“25, 2022, Tempe, AZ, USA. ACM, New York, NY, USA, 9 pages. https://doi.org/10.1145/3488560.3498375 User interactions with recommender systems (RSs) are subject to selection bias, as a consequence of the selective behavior of users and of the fact thatRSs actively restrict the items from which a user can choose [32,34,37,41,43]. A typical form of selection bias inRSs is popularity bias: popular items are often overrepresented in interaction logs because users aremorelikely to rate them [7,37,43]. Without correction, bias can aî€ect user preference prediction [22,41,56] and lead to problems of over-specialization [1], î€›lter bubbles [33,36], and unfairness [9]. To correct for selection bias in interaction data fromRSs, the task of debiased recommendation has been proposed. A widelyadopted method for this task makes use of inverse propensity scoring (IPS), a causal inference technique [24], and integrates it in the learning process of rating-prediction for recommendation [10,22,27,41]. It estimates the probability of a rating to be observed in the dataset, and inversely weights ratings according to these probabilities so that in expectation each user-item pair is equally represented. While the existingIPS-based debiasing method improves recommendations over methods that ignore the eî€ect of bias, we identify two signiî€›cant limitations. The way thatIPS-based debiasing is being applied for recommendations assumes that (1) the eî€ect of selection bias is static over time, and (2) user preferences remain unchanged as items get older. As we will show in Section 4, currentIPS-based methods are unable to debias recommendations when the selection bias and user preferences are dynamic, i.e., when they change over time. In practice, selection bias is usually dynamic, not static [9,26]. Typically, the popularity of an item changes with item-age [8,26], i.e., the time since its publication. Figure 1 shows the number of ratings items received as they get older in the MovieLens dataset (red line). On average, items receive the most attention during a short initial period of time after being published. Hence, instead of static selection bias, real-world user behavior may be better captured with dynamic selection bias that assumes diî€erent probabilities of observing user ratings at diî€erent item-ages. Besides selection bias, user preferences may also change over time [2,25,50]. In this paper, we will focus on the eî€ect of item-age on user preferences, and thus, on capturing the change in user preferences as items become older. From Figure 1, it is clear that the average observed user rating varies with the itemage (blue line), despite the increased variance observed due to a decreasing number of logged interactions. We use the term dynamic scenario to refer to the combination of dynamic selection bias and dynamic user preferences occurring in a recommendation setting. In this paper we î€›rst analyze real-world logged data to verify that the dynamic scenario is real: selection bias and user preferences are dynamic. The dynamic scenario poses a two-fold problem for existingIPS-based debiasing methods forRSs. First, they are not Figure 1: The number of ratings (indicative of popularity) and the average (observed) rating of items for diî€erent item-ages on the MovieLens-Latest-small dataset. unbiased in dynamic scenarios. Second, existing methods [7,41] for estimating static selection bias cannot be used to estimate dynamic selection bias. Hence, we propose and evaluate a debiasing method to account for dynamic selection bias and dynamic user preferences. All in all, we make a three-fold contribution: (1) an analysis and estimation of dynamic selection bias and dynamic user preferences in the MovieLens dataset; (2)DANCER: a general debiasing method that is adaptable for DebiAsing in the dyNamiC scEnaRio; and (3) time-aware matrix factorization (TMF)-DANCER: to our knowledge it is the î€›rst recommendation method that corrects for dynamic selection bias and models dynamic user preferences. General Recommendation. Early work onRSs typically uses collaborative î€›ltering (CF) to predict user ratings on items or make recommendations to users based on the feedback of similar users with similar behavior. It is customary to divide recommendation tasks into the rating prediction task with explicit feedback (e.g., user ratings) and the top-ğ¾ranking task with implicit feedback (e.g., clicks). In this paper, we focus on rating prediction with explicit feedback. The traditional matrix factorization (MF) algorithm directly embeds users and items as vectors and models user-item interactions with an inner product [15,30]. Some recent work has used deep neural networks to improveCF, e.g., by using multi-layer perceptrons [12,19], convolutional neural networks [18], or graph neural networks [17,48]. While they signiî€›cantly improve recommendation accuracy [28], they ignore the eî€ect of time. Time-aware Recommendation. Recently, a wide range of algorithms have been proposed that consider temporal information to improve RSs. Such methods are often classiî€›ed as time-aware or sequenceaware recommendation methods. Sequence-aware recommendation methods focus on the sequential order of interactions and aim to capture a userâ€™s short-term preferences [38]. Various deep learning methods have been applied to this task [38,59] such as recurrent neural networks [21,51,57], graph neural networks [52,54], and networks with attention [11, 23, 45]. We focus on time-aware recommendation methods [6] rather than sequence-aware recommendation methods, by considering changes in user preferences over exact time-periods. One of the best known examples is time-aware matrix factorization (TMF) [29], which takes the eî€ect of time into consideration by adding time-dependent terms to theMFmodel, thus allowing predicted ratings to vary over time. Koren[29]lists and compares various variants ofTMF, in how well they can capture item-related or user-related temporal eî€ects. Xiong et al. [53]propose time-aware tensor factorization (TTF): a factorization based model that uses additional latent factors for each time period based on a probabilistic latent factor model. Lastly, the eî€ect of time is sometimes modelled by utilizing contextual attributes related to time (e.g., day of the week or season of the year) as input features for context-aware RSs [4, 6, 35, 47]. Debiased Recommendation. User selection bias is prevalent in logged data, meaning that many logged user ratings are missing not at random (MNAR) [20,32,41]. Two typical forms of bias inRSs are known as popularity bias and positivity bias. Popularity bias is characterized by a long tail distribution over the number of interactions per item in logged data because users are more likely to interact with more popular items [37,43]. Positivity bias leads to an over-representation of positive feedback because users rate the items they like more often [37]. The eî€ect of these biases is generally dynamic: they can change drastically over time [9,26,58]. For instance, items are rarely popular for very extended periods of time, and therefore, we may expect a dynamic eî€ect between the age of items and popularity bias. Existing debiasing methods for reducing the eî€ect of selection bias addressMNARproblems as follows: (1) the error-imputation-based model (EIB) î€›lls in missing ratings with predicted values, which may introduce bias due to inaccurate predictions [42], (2) inverse propensity scoring (IPS) weights the loss associated with each observed rating inversely to their propensity, i.e., the probability of observing that rating [10,27,41], and (3) the doubly robust (DR) method integrates theEIBandIPSapproaches to overcome the high variance of IPS and the potential bias of EIB [49]. While the impact of dynamic bias has previously been pointed out [26,58], no prior debiasing method considers a scenario in which both selection bias and user preferences change over time. All existing debiased recommendation methods assume a static eî€ect of selection bias regardless of whether they model dynamic user preferences. Hence, there is currently no method that can eî€ectively correct for bias in the dynamic scenario. This is the research gap that we address. We follow the commonRSsetting where items from the setI = {ğ‘–,...,ğ‘–}arerecommended to users fromthe setU = {ğ‘¢,...,ğ‘¢}[44]. Users have preferences towards items, generally modelled by a label ğ‘¦(e.g., a ratingğ‘¦âˆˆ {1,2,3,4,5}) per userğ‘¢ âˆˆ Uand itemğ‘– âˆˆ I. Similar to time-aware recommendations [6,29,53], we also consider the eî€ect of time on user preferences: letT = {ğ‘¡,...,ğ‘¡}be a set ofğ‘‡ time periods; we allow the user preferenceğ‘¦to vary over diî€erent periodsğ‘¡ âˆˆ T. Our goal is to optimize anRSthat best captures the user preferences across all itemsğ‘–and time periodsğ‘¡. We formulate this goal as a loss function: letË†ğ‘¦be a predicted rating by theRS andğ¿(Ë†ğ‘¦,ğ‘¦)a comparison function between the predicted rating and actual rating. Then our loss is: The functionğ¿can be chosen according to commonRSmetrics, for example, the prevalent Mean Squared Error (MSE) metric: The choice forRSs to perform well across all time periodsğ‘¡inTis partially made for practical reasons; arguably, at any particular time one only needsRSs to perform well for the present and future [25]. However, in practice, data is only available about past user preferences, thus making optimization w.r.t. future preferences infeasible. Moreover, we expect that ifRSsâ€™ performance generalizes well across the time periods inT, it likely also generalizes well into the near future. In our setting, logged interaction data is available to provide user ratings that can be used for optimization. However, it is unrealistic for all users to provide ratings for all items. In practice user interaction data is very sparse. We will use an observation indicator matrix O âˆˆ {0,1}that indicates what ratings are recorded in the logged interaction data and during which time period. We use ğ‘œâˆˆ Oto indicate this per rating:ğ‘œ=1 indicates that the rating for userğ‘¢on itemğ‘–during time periodğ‘¡has been recorded in the logged data, andğ‘œ=0 that it is missing. The matrixOis strongly inî€uenced by selection bias: certain ratings are much more likely to be observed than others. This can be due to self-selection bias: users choosing to rate certain items more often [37,43]; or algorithmic bias: theRSused for logging choosing to show certain items more often [3,14]. Well-known prevalent biases inRSdata include: (1) popularity bias [37,43] â€“ often a small group of popular items receive most interactions; and (2) positivity bias [37] â€“ users are usually more likely to rate items they prefer. We model selection bias using the probability of a rating being recorded:ğ‘= ğ‘ƒ (ğ‘œ=1), which we also refer to as the observation probability or propensity. Again, we deviate from the common existing method by explicitly allowingğ‘to vary over diî€erent time periodsğ‘¡. This enables our method to not only model a bias such as popularity bias but also how that bias changes as items get older and decline in popularity. Before we introduce our recommendation method for dealing with the dynamic scenario in which both selection bias and user preferences are dynamic, we will show that, in a dynamic scenario, the existing recommendation methods that either assume no bias or static bias are not unbiased. The standard estimation of how well the predicted user preferences reî€ect the true user preferences shown in Eq. 1 is the full-information loss (i.e., the loss based on all the ratings), which is impractical since user preferences are only partially known in the logged data. The naive loss ignores the eî€ect of selection bias completely and thus assumes that the observed data represents the true user preferences unbiasedly. Under this assumption, the naive loss can be estimated by a simple average on the observed ratings: And the widely-used debiasing method usesIPSestimation [24,31] to correct for the probability that a user rates an item [41]. It uses static propensitiesğ‘that are the probability of observing a rating for item ğ‘–by userğ‘¢in any of the time-periods [32,39]. These propensities ignore the dynamic aspect of selection bias, i.e., that these probabilities can vary per time period ğ‘¡ , resulting in the static IPS estimator: Now that we have described the naive and static IPS-based loss functions for recommendation (that assume no bias and only static bias, respectively), we can consider the eî€ect of dynamic selection bias. Ignoring dynamic selection bias, the recommendation methods that use the naive or static IPS estimation are not unbiased in dynamic scenarios. To illustrate how this may happen, we use a simple exampleXwith one userğ‘¢, one itemğ‘–and two time periodsğ‘¡andğ‘¡. Let ğ‘¦andğ‘¦be the user ratings on the item atğ‘¡andğ‘¡respectively; ğ‘andğ‘denote the probabilities of observing the ratings atğ‘¡and ğ‘¡, respectively. We omit the subscript ofğ‘¢andğ‘–if no confusion can arise. Due to dynamic user preferences and dynamic selection bias, the user ratings and observation probabilities are not constant over the diî€erent time periods:ğ‘¦â‰ ğ‘¦, ğ‘â‰  ğ‘.Remember that in this example the loss we wish to estimate is: The expected naive loss over the observation variables becomes:hi Clearly, it is not proportional to the true lossLwhen selection bias and user preferences are dynamic: ifğ‘¦â‰ ğ‘¦andğ‘â‰  ğ‘, thenî€‚î€ƒ ELÌ¸âˆ L. This happens because the rating with the higher probability of being observed is over-represented in the observations. Then the staticIPS-based debiasing method uses static propensity ğ‘= ğ‘+(1âˆ’ğ‘)ğ‘that is the probability of observing a rating at time ğ‘¡or ğ‘¡. If we consider the expected value of this estimator:î€’î€“ we see that it is not proportional to the true loss in the dynamicî€‚î€ƒ scenario: ifğ‘¦â‰ ğ‘¦andğ‘â‰  ğ‘, thenELÌ¸âˆ L, because the static IPS estimation fails to address the problem that the userâ€™s rating at a time with a higher probability of being observed is more likely to be represented in logged data than at any other time. We note that the above counterexample holds regardless of whether the prediction of user ratings allows for dynamic preferences, i.e., Our example is overly simplistic as it only contains a single user and a single item and two time periods; however, it can trivially be extended to any number of items, users or time periods. Thus, it is a signiî€›cant problem forRSs that optimization with the naive or staticIPS is not unbiased if both the user preferences and the selection bias are dynamic; it will lead to biased optimization. Selection bias and user preferencesare practically never static in the real-world; in support of this claim, Sections 7 and 8 provide evidence that the dynamic nature of bias and preferences can be observed in the MovieLens dataset. We introduceDANCER, a method for DebiAsing in the dyNamiC scEnaRio. We applyDANCERto time-aware matrix factorization (TMF), resulting in a novel rating prediction method that corrects for dynamic bias and models dynamic preferences. We introduce a propensity estimation method to estimate the probabilities of ratings being observed per time period. As discussed in Section 4, existing debiasing methods that use the naive or static IPS estimation are unable to debias in the dynamic scenario where selection bias and user preferences are both dynamic. As a solution, we proposeDANCER. With accurate propensitiesğ‘, dynamic selection bias can be fully corrected by applyingDANCER to inversely weight the evaluation of the predicted ratings: Unlike the naive approachL(Eq. 3) and the static IPS approach with a static estimatorL(Eq. 4), the proposed debiasing method Lis unbiased in the dynamic scenario:î€‚î€ƒ BecauseDANCERutilizes propensities that vary per time periodğ‘¡, it can correct for dynamic eî€ects of bias that the existing static IPS estimators cannot. For instance, in our exampleXwith a user, an item and two time periods (see Section 4), the expectedDANCERloss becomes:î€’î€“ where we can see thatLis an unbiased estimation of the true lossL. Combined with a time-aware recommendation method, DANCER is able to predict that the user ratings change over time. Because we expect both selection bias and user preferences to change over time in a dynamic scenario, the rating prediction that is optimized byDANCERshould also be able to account for changes in user preferences. WhileDANCERis not model speciî€›c, we will apply it to a time-aware matrix factorization (TMF) [29] model that accounts for temporal eî€ects. We refer to this combination ofTMFand debiasing method asTMF-DANCER. Given an observed ratingğ‘¦ from userğ‘¢on itemğ‘–at timeğ‘¡,TMFcomputes the predicted rating are embedding vectors of userğ‘¢and itemğ‘–, andğ‘âˆˆ R,ğ‘âˆˆ R, and ğ‘ âˆˆ Rare user, item and global oî€sets, respectively. Crucially,ğ‘is a time-dependent oî€set and models the impact of time in rating prediction. Under this model, the proposedTMF-DANCERis optimized by minimizing the following loss: whereğ‘·,ğ‘¸andğ‘©denote the embeddings of all users, all items and all the oî€set terms, respectively; ğ›¿ is the MSE loss function. DANCERrequires accurate propensitiesğ‘to remove the eî€ect of dynamic selection bias. Because it is the î€›rst method to consider dynamic selection bias inRSs, it thus also needs a novel method to estimateğ‘= ğ‘ƒ (ğ‘œ=1), i.e., the probability that the rating for userğ‘¢and itemğ‘–is observed at timeğ‘¡. We propose to apply a Negative Log-Likelihood (NLL) loss to the propensity estimatesË†ğ‘and the observations made in a dataset (indicated by ğ‘œ): where the function ğ¿is the NLL for each individual propensity: Due to the large number of estimated propensitiesË†ğ‘, we argue that it is best to predict them with a model. Similar to the rating prediction task,TMFandTTF[53] are potential choices to model how the propensities vary over users, items and time periods. Alternatively, one can also make simplifying assumptions in the estimations of dynamic popularity bias. For instance,Ë†ğ‘= Pop(ğ‘–,ğ‘¡):= uses the ratio of ratings received by itemğ‘–at timeğ‘¡. ThePop(ğ‘–,ğ‘¡) estimate is easy to compute, but it does assume that there are no diî€erences between users when it comes to providing ratings. Finally, we note that our proposed propensity estimation method Eq. 12 builds on existing methods for propensity estimation for static selection bias. Saito et al. [40]useMFinstead ofTMForTTF. Similarly, thePop(ğ‘–):=is a common way to measure (static) popularity bias [7,13,58]. Our propensity estimation method makes these methods applicable to the dynamic scenario, and enables them to provide propensities for the DANCER debiasing method. In our experiments, we focus on the age of an item (item-age) and the dynamic eî€ect it has on selection bias and user preferences. From this point onwards, our notation will useğ‘¡to denote how long an item has been available in the system, we will refer to this as the age of the item. Because the distribution of ratings is very skewed towards young items, we divide the item-ages into seven bins whose edges are [0,1,3,5,8,11,15,âˆ]in years. For instance, a rating on an item when it is two-and-a-half years old will be assigned toğ‘¡ =2, and a rating when it is 15 years old will be assignedğ‘¡ =7. This can be interpreted as a speciî€›c choice for the time periodsTand thus does not change any of the previously stated theory. We î€›rst wish to investigate whether real-world selection bias and user preferences are aî€ected by item-age â€“ and are thus dynamic â€“ and whetherTMF-DANCERis more eî€ective in a dynamic scenario than existing rating prediction methods that do not consider dynamic bias. Our experimental analysis is organized around three researchquestions: (RQ1) Does item-age aî€ect selection bias present in logged data? (RQ2) Does item-age aî€ect real-world user preferences? (RQ3) Does the proposedTMF-DANCERmethod better mitigate the eî€ect of bias in the dynamic scenario than existing debiasing methods designed for static selection bias? To answer these questions, we make use of three diî€erent tasks based around the MovieLensLatest-small dataset [16]. The following sections will each introduce one of these tasks and answer the corresponding research question. All tasks use embeddings with 32 dimensions, hyperparameter tuning is applied per method and task in the following ranges: learning rateğœ‚ âˆˆ {10,...,0.1}andğ¿regularization weightsğœ† âˆˆ {0,10,10, ... ,1.0}. Our implementation and hyperparameter choices are available at https://github.com/BetsyHJ/DANCER. To answerRQ1: Does item-age aî€ect selection bias present in realworld logged data?, we will evaluate whether methods that consider item-age can better predict which items will be rated than methods that do not. If item-age has a large eî€ect on selection bias, it should be an essential feature for predicting whether users will rate an item. The goal of our î€›rst task is to predict which ratings will be observed in real-world data, in other words, across usersğ‘¢, itemsğ‘–and itemagesğ‘¡the aim is to predict the observationğ‘œvariables. WithË†ğ‘ as the predicted probability of observation, the metrics for this task are the NLL (Eq. 13) and Perplexity (PPL): 2. (14) To evaluate whether item-age has a signiî€›cant eî€ect on the observation probabilities â€“ and thus the dynamic selection bias in the data â€“, we compare the performance of observation prediction methods that assume static bias with others that take item-age into account. Our comparison contains three baselines, one static method and four time-aware methods; when specifying the methods, we useğœto denote the sigmoid function,ğ’‘for a learned user embedding,ğ’’for an item embedding, ğ’‚for an embedding representing an item-age, and ğ‘is a learned parameter that varies per item-age ğ‘¡. (1) Constant: The fraction of all ratings, this assumes no selection bias is present:Ë†ğ‘=. (2) Static Item Popularity (Pop): The fraction of all ratings that have been given to the item; this assumes that selection bias is static over users and time:Ë†ğ‘=. (3) Time-aware Item Popularity (T-Pop): The item popularity per item-age; deî€›ned as the fraction of all ratings that have been given to item ğ‘– of age ğ‘¡:Ë†ğ‘=. (4) Static matrix factorization (MF): A standardMFmodel that assumes selection bias is static:Ë†ğ‘= ğœ (ğ’‘ğ’’). (5) Time-aware matrix factorization (TMF)[29]:TMFcaptures the drift in popularity as items get older by adding an agedependent bias term:Ë†ğ‘= ğœ (ğ’‘ğ’’+ğ‘). (6) Time-aware tensor factorization (TTF)[53]:TTFextends MFby modelling the eî€ect of item-age via element-wise multiplication:Ë†ğ‘= ğœ (ğ’‘(ğ’’Ã—ğ’‚)). (7) TTF++: We propose a variation onTTFthat models the eî€ect via summation instead:Ë†ğ‘= ğœ (ğ’‘(ğ’’+ğ’‚)). (8) Time-aware matrix & tensor factorization (TMTF): Lastly, we propose a novel integration ofTMFwithTTF++:Ë†ğ‘= All models are optimized with theNLLloss as described in Section 5.3. We split the dataset into training, validation and test partitions following a ratio of 7:1:2. The MovieLens-Latest-small dataset [16] consists of 100,836 ratings applied to 9,742 movies by 610 users between 1996 and 2018. We apply two splitting strategies to the data: (1) a time-based split that per user places the latest 20% of their ratings into the test set [6]; and (2) a random split that uniformly samples 20% of ratings per user. The time-based split is more realistic but makes the training and test data follow diî€erent distributions: i.e., there will be more ratings on younger items in the training set than in the test set. Alternatively, the random split ensures both partitions follow the same distribution but is less realistic: i.e., ratings in the test set may have taken place before ratings in the training set. For both settings, the training and validation set are uniformly randomly sampled from the data outside the test set. Since most users have an active lifecycle of less than one year, the time-based split results in a ratio between observed and missing ratings that is four times higher Table 1: RQ1 â€“ Performance in observation prediction. Results are averages of 10 independent runs, the standard deviations are shown in brackets. â€  indicates a signiî€›cant improvement overMF (ğ‘ <0.01) according to the paired-samples t-test. TTF++ 0.0632 than the ratio in the test set; to account for this large diî€erence in distributions we scale the predictedË†ğ‘by 0.25 in this setting. This leads to considerable performance improvements for all methods. Lastly, we ignore ratings outside of the userâ€™s presence in the dataset, i.e., before their î€›rst rating or after their last; this prevents the methods from having to predict when users became active so that they can focus on the eî€ect of item-age. The results for the î€›rst task are presented in Table 1. Clearly, under both splitting strategies, the time-aware methodsTMF,TTF++ and TMTFare signiî€›cantly more accurate thanPopandMF, which assume that selection bias is static, whileMFoutperforms Constant, which assumes no bias. Interestingly, T-Pop performs worst among all the methods, probably due to the high variance caused by sparsity. Under the random splitting strategy,TTFandTTF++ outperform TMF, whileTMTFoutperforms all other methods. Thus it appears that modelling item-age via a learned embedding better captures its eî€ect than a single learned parameter, but moreover,TMTFshows us that combining both results in the most accurate method. Under the time-based splitting strategy,TMFperforms slightly better than TTF++ andTMTF, whileTTFperforms worse than them. Also,Pop performs worse than Constant. A plausible reason for this inconsistency is the diî€erence in distribution between the training and test set caused by the time-based split. The number of ratings per year displayed in Figure 2 displays this diî€erence. This suggests that TMFis more robust to diî€erences in distribution and that the other methods are somewhat overî€›tted on the training set. Nevertheless, most time-aware methods still predict the selection bias signiî€›cantly better than the static MF. We thus conclude that time-aware methods can better predict selection bias in real-world data than static methods. While the skewed rating distribution in Figure 1 already suggests that item-age has a large inî€uence, our experimental results strongly show that item-age is an essential factor for accurately capturing the selection bias in usersâ€™ rating behavior. Consequently, we answerRQ1aî€œrmatively: item-age signiî€›cantly aî€ects the selection bias present in real-world data. This result strongly implies that the assumption of static bias in previous work is incorrect, at least in recommendation settings similar to that of the MovieLens dataset. To answerRQ2: Does item-age aî€ect real-world user preferences?, we compare rating prediction methods that assume preferences are static with ones that allow for dynamic preferences. If item-age has a signiî€›cant eî€ect, the latter group should perform better. The average rating per item-age in Figure 1 does not reveal a clear inî€uence from the item-age on rating behavior. However, the averages should not be taken at face value because they are subject to selection bias. Users are generally more likely to rate movies they like (i.e., positivity bias [37]), thus it is possible that while the true average rating drops, the observed remains stable due to selection bias. To î€›nd out whether item-age has a substantial eî€ect, we compare methods that assume static preferences with others that allow for dynamic preferences in terms of the Mean Squared Error (MSE), Mean Absolute Error (MAE) and Accuracy (ACC) metrics. We train and evaluate in two settings: (1) in the observed setting the dataset is used without any corrections to mitigate selection bias; and (2) in the debiased setting self-normalized inverse propensity scoring (SNIPS) [46,55] is applied during training and metric calculation to mitigate the eî€ect of selection bias. The advantage of the debiased setting is that â€“ in expectation â€“ it bases evaluation on the true rating distribution; however, it has drawbacks: it requires accurate propensities and can be subject to increased variance. The observed setting will provide biased estimates but does not have these drawbacks. Our evaluation considers both settings so that their advantages can complement each other. The comparison includes two baselines: (1) Static Average Item Rating (Avg): The average observed rating across all item-ages:Ë†ğ‘¦=. (2) Time-aware Average Item Rating (T-Avg): the average observed rating per item-age:Ë†ğ‘¦=. In addition, we also compare with the staticMFand the time-aware TMF,TTF,TTF++ andTMTF. These methods are analogous to those used in Section 7; the main diî€erence is that for this task theğœsigmoid function is not applied. Additionally, we add a global oî€set ğ‘, a user oî€setğ‘, and an item oî€setğ‘toMF,TMFandTMTF. All methods are optimized to minimizeMSE; in the debiased setting optimization is performed withDANCERfollowing Section 5. We use the propensity values estimated for the previous observation prediction task by TMTF under the random-split (see Section 7.1). The dataset is again partitioned into a training, validation and test set according to a ratio of 7:1:2. Unlike for the previous task (Section 7.1), the data for this task only consists of observed ratings, and furthermore, the partitioning is only made via uniform random sampling. As displayed in Figure 2, we î€›nd that a time-based split leads to extremely diî€erent rating distributions. This makes it infeasible to obtain convincing conclusions from the results of this task. Nevertheless, because a random split is perfectly suitable for evaluating a possible relationship between user preferences and item-age, our results are completely appropriate to answer RQ2. Table 2 displays the evaluation results for the second task; in both settings the time-aware methods outperform the staticMF. There Figure 2: Average rating and number of ratings over item-age inthetime-basedpartitionedtraining(left)andtestset(right). is a single exception:TTFperforms worst in both settings, probably due to over-î€›tting. The diî€erences between the other time-aware methods and static MF are larger in the debiased setting than in the observed setting. This suggests that selection bias in the data reduces the dynamic eî€ect of item-age on the observed ratings. We speculate that the eî€ect of positivity bias could increase with item-age: users are less likely to try and rate movies that are older unless they already expect to enjoy them. Due to sparsity, T-Avg performs worse than Avg in both settings. Interestingly, Avg performs even better than MFin the debiased setting; this conî€›rms prior observations that Avg is more robust in highly biased scenarios [7]. Regardless, in both settings most time-aware methods signiî€›cantly outperform MF and the two baselines, and therefore, we answerRQ2in the aî€œrmative: item-age has a signiî€›cant eî€ect on user preferences. Our conclusions for RQ1 and RQ2 indicate that the dynamic scenario, where selection bias and user preferences change over time, better captures real-world logged data, than a static view. Moreover, Section 4 showed that the existing static IPS approach cannot debias in this scenario. Consequently, our answers to RQ1 and RQ2 reveal a real need for a method that can deal with the dynamic scenario. Section 4 showed that the staticIPS-based debiasing method is biased in a dynamic scenario. Subsequently, in Section 7 and 8 we discovered that selection bias and user preferences in the MovieLens dataset are indeed dynamic. Therefore, we can already conclude that theoreticallyTMF-DANCERis the î€›rst method that is potentially unbiased for the dynamic scenario. Our î€›nal research question considers whether this theoretical advantage translates into improved recommendation performance:RQ3: Does the proposedTMF-DANCER method better mitigate the eî€ect of bias in the dynamic scenario than existing debiasing methods designed for static selection bias? The most common technique for evaluating debiasing methods for recommendation, without actual deployment to real-world users, makes use of unbiased test sets [41,49]. This requires a dataset that has a training set consisting of biased logged ratings and a test set of user ratings on uniformly randomly selected items. Such a test set can be created by randomly sampling items and asking users to provide a rating for them, thus avoiding the selection bias that usually heavily aî€ects what items are rated. However, the publicly available datasets that meet this criterion â€“ Yahoo!R3 [32] and Coat Shopping [41] â€“ lack any form of temporal information.As a result, we cannot apply DANCER or any other form of dynamic debiasing to them. Table 2: RQ2 â€“ Performance comparison of diî€erent methods in predicting ratings logged in MovieLens-Latest-small. â€  indicates that the improvement of the models over MF is signiî€›cant (ğ‘ < 0.01). â†‘/â†“indicates whether larger or smaller values are better. As an alternative to using real-world datasets, we utilize a semisynthetic simulation based on a real-world dataset for our evaluation. This simulation î€›rst estimates a simulated Ground Truth (sim-GT) based on the actual dataset, and then generates a new biased training set from thissim-GT. Debiasing methods can be applied to the generated training set and evaluated on thesim-GT, since in this setting, the debiased estimates should match thesim-GTas close as possible. The creation of our semi-synthetic simulation has three steps: (1)First, we estimate the complete rating matrix using theTMF method, which simply uses an age-dependent bias term to model the dynamics of user preferences, thus making the simulation understandable and not prone to overî€›tting. This provides us with an estimated rating for each item, user and item-age combination which we will treat as thesim-GT. By optimizingTMF with the real user ratings in the debiased setting, we hope the sim-GT reî€ects the real-world scenario as closely as possible. (2)Second, dynamic selection bias is simulated usingMFto model the interactions between items and item-ages. Following Section 7, we î€›t the following model:ğ‘= ğœ (ğ’’ğ’‚), to predict if the ratings are observed in the MovieLens dataset. To mimic real-world dynamic popularity bias more closely, we follow the user presence of the original dataset: propensities are zero before a userâ€™s î€›rst rating and after their last rating in the dataset, we also normalize the predicted probabilities so that their mean value is 4%, the same value as the dataset has. (3)Third, to prevent overlap between the training and test set, we utilize both random and time-based splitting: per user, 50% of items are randomly selected for the test set, and a split timestep is chosen at 80% of the user presence. The test set consists of allsim-GTratings on the randomly selected items at the last presence of each user; as a result, the test set reî€ects future preferences on previously unseen items. The training set uses the other 50% of items per user and samples from the ratings before the split timestamp following the estimated propensitiesğ‘ from the previous step. The result is a training set where due to dynamic selection bias onlyâˆ¼2% of theğ‘¦ratings are observed. Figure 3 compares the original MovieLens dataset with our semisynthetic simulation. The popularity of items, in terms of how many ratings they receive, is closely approximated by the simulated training set. In terms of average rating, there is some deviation from the simulated training set and MovieLens: the simulated training set rates older items lower than MovieLens. It seems likely that this is the result of positivity bias, which is not part of our simulation. Figure 3: RQ3 â€“ The proportion of ratings and the average rating of items over item-age on MovieLens, the simulated training set (sim-train) and the simulated Ground Truth (sim-GT). Nonetheless, we clearly see that both dynamic selection bias and dynamic user preferences are represented in our simulation. We compare the performance ofTMF-DANCERwith the following baselines: (1) Four methods that ignore bias altogether: Avg, T-Avg,MFandTMF(see Section 8). (2) Two methods optimized with the static IPS estimator:MF-staticIPS [41] andTMF-staticIPS, which use the Static Item Popularity propensities from Section 7. (3) A static preference method with dynamic debiasing:MF-DANCER, which optimizes a (static)MFwhile correcting for the eî€ect of dynamic bias. Finally, to evaluate whetherTMF-DANCERis robust to misspeciî€›ed propensities, we compare its performance with using TimeAware General Popularity (TG-Pop):Ë†ğ‘=, and Time-aware Item Popularity (T-Pop) (see Section 7.1). The main results of our comparison are displayed in Table 3. Based on the displayed results we can make four observations: (1) The average methods (Avg and T-Avg) perform considerably worse than all other methods. Clearly, matrix factorization is preferable over averaging baselines. (2) The time-based methods outperform their static counterparts by substantial margins: TMFâ‰»MF, TMF-StaticIPSâ‰» MF-StaticIPS, and TMF-DANCERâ‰»MF-DANCER, except T-Avgâ‰º Avg due to sparsity. This shows that assuming static preferences can substantially hurt the performance of a method when user preferences are actually dynamic. (3) The debiased methods increase performance: MF-DANCERâ‰»MF andTMF-DANCERâ‰»TMF-StaticIPS â‰»TMF. There is a single exception:MF â‰» MF-staticIPS under the assumption of static bias. This surprising observation shows that DANCERis more robust to certain dynamic scenarios. (4) Finally, the best performing method is TMF-DANCER, which both models dynamic preferences and is debiased under the assumption of dynamic selection bias. While it is not a surprise that this method Table 3: RQ3 â€“ Performance of TMF-DANCERcompared with diî€erent methods. â€  indicates that the improvement of TMFDANCERoverallthebaselinesissigniî€›cantatthelevelof0.01. TMF-DANCER 0.1045 Table 4: RQ3 â€“ Performance of TMF-DANCER with estimated propensities and the (simulated) ground truth propensities. Ground Truth 0.1045 (0.0014) 0.2444 (0.0018) 0.6151 (0.0039) performs well in the scenario that it assumes, the diî€erences with other methods are considerable and statistically signiî€›cant. In addition, Table 4 displays the performance of TMF-DANCER using diî€erent propensities. We see that with estimated propensities the performance of TMF-DANCER is comparable to when it is using the actualsim-GTpropensities. Moreover, TMF-DANCER outperforms the most baselines, exceptTMF-StatisIPS, even when using simple time-aware propensity estimation. To better understand the improvements of TMF-DANCER, Figure 4 shows the average predicted rating from diî€erent methods across item-ages and the actual average rating. The MF methods are unable to model changes in ratings as items get older; the diî€erences in the average ratings are purely caused by diî€erent item distributions: i.e., items that become available later in the dataset will never achieve the oldest item-ages. The TMF methods better capture the overall trend. TMF without debiasing consistently overestimates ratings; TMF-staticIPS reduces overestimation by correcting for static bias; the overestimation becomes worse for older items in both models. Instead, TMF-DANCER approximates the actual average rating at each item-age; its accuracy is quite consistent over time. Lastly, to get more insights into the behavior of TMF-DANCER, Figure 5 shows the propensities and (predicted) ratings per item-age and averaged across users for two handpicked movies. We observe thatTMF-DANCERoutperformsTMF, especially when the popularity of items decreases as items get older. Finally, we can answerRQ3in the aî€œrmative: theTMF-DANCER method better mitigates the eî€ect of bias in a dynamic scenario than existing debiasing methods designed for static selection bias. This conclusion still holds when propensities are estimated, and the accuracy of TMF-DANCER is consistent across item-ages. In this paper, we considered the dynamic scenario in recommendation where selection bias and user preferences change over time. Our experimental results revealed that in the real-world MovieLens Figure4: RQ3 â€“ Averagerating on items predicted by diî€erent models over the item-age. Figure5:RQ3â€“Averagepropensitiesandpredictedaveragerating overitem-age of the very p opular movie â€œMad Max (1979)â€ and the less popular â€œKid in King Arthurâ€™s Court (1995)â€. dataset: (1) selection bias changes as items get older, and (2) user preferences are also aî€ected by the age of items. Therefore, it appears that the dynamic scenario better captures the real-world situation, and thus, poses a serious problem that existing static IPS-based method cannot correct for dynamic bias in dynamic scenarios. As a solution, we proposed the DANCER debiasing method that takes into account the dynamic aspects of bias and user preferences, the î€›rst method that is unbiased in the dynamic scenario. The results on a semi-synthetic simulation based on the MovieLens dataset showed that TMF-DANCER provides signiî€›cant gains in performance that are consistent across item-ages and robust to misspeciî€›ed propensities. Our î€›ndings about the dynamic scenario have implications for state-of-the-art recommendation methods, as they are strongly aî€ected by dynamic selection bias. With theDANCERdebiasing method, RSs can now be expanded to deal with dynamic scenarios. A limitation of our work is that we only considered the rating prediction task and the eî€ect of item-age on bias and preferences; future work should consider the ranking task and look at other aspects of time, e.g., seasonal eî€ects, weekday, time of day, etc. This research was partially supported by the Netherlands Organisation for Scientiî€›c Research (NWO)under project number 024.004.022 and the Google Research Scholar Program. All content represents the opinion of the authors, which is not necessarily shared or endorsed by their respective employers and/or sponsors.